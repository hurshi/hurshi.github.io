I"•,<ul>
  <li>
    <p>å¯ä»¥åœ¨ Service ä¸­å¯åŠ¨ Activity ä¹ˆï¼Ÿ</p>

    <blockquote>
      <p>å¯ä»¥çš„ï¼Œéœ€è¦åŠ ä¸Š FLAG_ACTIVITY_NEW_TASK è¿™ä¸ª flag.</p>

      <p>å¼Šç«¯ï¼šä¼šåœ¨ç³»ç»Ÿçš„â€œæœ€è¿‘ä»»åŠ¡â€ä¸­æ˜¾ç¤ºï¼Œå¯ä»¥é€šè¿‡ android:excludeFromRecents=â€trueâ€ è§£å†³</p>

      <p>å…¼å®¹ï¼šåœ¨ oppo, vivo æ‰‹æœºä¸­ï¼Œé»˜è®¤ä¸èƒ½è·³è½¬ï¼Œéœ€è¦å¼•å¯¼ç”¨æˆ·å¼€å¯â€œè‡ªå¯åŠ¨â€æƒé™æ‰å¯ä»¥ã€‚</p>
    </blockquote>
  </li>
  <li>
    <p>å¯ä»¥åœ¨ Service ä¸­å¼¹å‡º Dialog ä¹ˆï¼Ÿ</p>

    <blockquote>
      <p>å¯ä»¥çš„</p>

      <ol>
        <li>
          <p>éœ€è¦æƒé™ï¼šandroid.permission.SYSTEM_ALERT_WINDOW</p>
        </li>
        <li>
          <p>ä»¥åŠ dialog.getWindow().setType(WindowManager.LayoutParams.TPYE_SYSTEM_ALERT);</p>
        </li>
      </ol>
    </blockquote>
  </li>
  <li>
    <p>å¦‚ä½•å®ç°é”å±å‘¢ï¼Ÿ</p>

    <blockquote>
      <ol>
        <li>
          <p>ç›‘å¬ç­å±å¹¿æ’­äº‹ä»¶ï¼Œåœ¨ç­å±çš„æ—¶å€™å¯åŠ¨é”å± Activityã€‚</p>
        </li>
        <li>åœ¨é”å± Activity ä¸­å°è¯•å±è”½ç³»ç»Ÿé”å±ã€‚å¦‚æœå±è”½ä¸äº†ï¼Œè¦é€šè¿‡ setShowWhenLocked(true) ç­‰æ–¹æ³•æ¥ä½¿çš„é”å± Activity åœ¨é”å±ç•Œé¢çš„æœ€ä¸Šå±‚ã€‚
          <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="n">getWindow</span><span class="o">().</span><span class="na">addFlags</span><span class="o">(</span><span class="nc">WindowManager</span><span class="o">.</span><span class="na">LayoutParams</span><span class="o">.</span><span class="na">FLAG_DISMISS_KEYGUARD</span> 
                  <span class="o">|</span> <span class="nc">WindowManager</span><span class="o">.</span><span class="na">LayoutParams</span><span class="o">.</span><span class="na">FLAG_SHOW_WHEN_LOCKED</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">android</span><span class="o">.</span><span class="na">os</span><span class="o">.</span><span class="na">Build</span><span class="o">.</span><span class="na">VERSION</span><span class="o">.</span><span class="na">SDK_INT</span> <span class="o">&gt;=</span> <span class="mi">26</span><span class="o">)</span> <span class="o">{</span>
     <span class="o">((</span><span class="nc">KeyguardManager</span><span class="o">)</span> <span class="n">getSystemService</span><span class="o">(</span><span class="nc">Context</span><span class="o">.</span><span class="na">KEYGUARD_SERVICE</span><span class="o">))</span>
             <span class="o">.</span><span class="na">requestDismissKeyguard</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
 <span class="o">}</span>
<span class="k">if</span> <span class="o">(</span><span class="n">android</span><span class="o">.</span><span class="na">os</span><span class="o">.</span><span class="na">Build</span><span class="o">.</span><span class="na">VERSION</span><span class="o">.</span><span class="na">SDK_INT</span> <span class="o">&gt;=</span> <span class="mi">27</span><span class="o">)</span> <span class="o">{</span>
     <span class="n">setShowWhenLocked</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div>          </div>
        </li>
        <li>å…¼å®¹ï¼šåœ¨ å°ç±³ï¼Œé­…æ—æ‰‹æœºä¸Šï¼Œéœ€è¦å¼•å¯¼ç”¨æˆ·å¼€å¯â€œé”å±â€æƒé™æ‰èƒ½åœ¨é”å±ç•Œé¢æ˜¾ç¤ºã€‚</li>
      </ol>
    </blockquote>
  </li>
  <li>
    <p>Retrofit æºç ç›¸å…³ï¼š</p>

    <blockquote>
      <ol>
        <li>ç¼“å­˜ï¼šå¯¹æ¯ä¸ªè¿›æ¥çš„ Method éƒ½ä¼šåˆ›å»ºä¸€ä¸ª ServiceMethod å®ä¾‹ï¼Œå¹¶ä¿å­˜åœ¨ ConcurrentHashMap ä¸­ã€‚</li>
        <li>ServiceMethod è´Ÿè´£çš„å†…å®¹ï¼šè§£ææ³¨è§£ï¼Œé…ç½® CallAdapterï¼Œé…ç½® Converterã€‚
          <ol>
            <li>è§£ææ³¨è§£ï¼šè§£æè°ƒç”¨æ–¹æ³•ï¼Œå‚æ•°çš„æ³¨è§£ã€‚</li>
            <li>é…ç½® CallAdapterï¼šæ˜¯ retrofit Call çš„è½¬æ¢å™¨ï¼Œæ¯”å¦‚å°† OkhttpCall è½¬æ¢ä¸º RxJavaã€‚</li>
            <li>é…ç½® Converterï¼šå¯¹è¿”å›æ•°æ®è¿›è¡Œè½¬æ¢ï¼Œæ¯”å¦‚ Gson åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼Œå¯ä»¥é…ç½®å¤šä¸ª converter, retrofit ä¼šä¾æ¬¡è°ƒç”¨è¿™äº› converters, é‡åˆ°èƒ½è½¬æ¢çš„ converter å°±ç›´æ¥è¿”å›ï¼Œä¸å†å¾€ä¸‹æ‰ç”¨ã€‚</li>
          </ol>
        </li>
      </ol>
    </blockquote>
  </li>
  <li>
    <p>OkHttp</p>

    <blockquote>
      <ol>
        <li>è´£ä»»é“¾æ¨¡å¼ï¼šOKhttp é€šè¿‡è´£ä»»é“¾æ¨¡å¼æ¥è§£è€¦ä¸åŒæ¨¡å—ã€‚</li>
      </ol>
    </blockquote>
  </li>
  <li>
    <p>AAC - LifeCycle</p>

    <blockquote>
      <ol>
        <li>
          <p>LifeCycle æ˜¯å¦‚ä½•æ„Ÿåº”ç”Ÿå‘½å‘¨æœŸçš„ï¼Ÿ</p>

          <blockquote>
            <p>Activity çš„çˆ¶ç±» SupportAcitivty ä¸­æ³¨å…¥äº† ReportFragmentï¼Œåœ¨ ReportFragment ç›‘å¬ç”Ÿå‘½å‘¨æœŸçš„å˜åŒ–ï¼Œç„¶ååé¦ˆç»™ SupportActivity çš„å˜é‡ mLifecycleRegistryï¼Œåœ¨ mLifecycleRegistry ä¸­è°ƒç”¨ observer å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚</p>
          </blockquote>
        </li>
        <li>
          <p>æ˜¯å¦‚ä½•è°ƒç”¨åˆ°æœ‰ <code class="highlighter-rouge">@OnLifecycleEvent(Lifecycle.Event.ON_START)</code> æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ï¼Ÿ</p>

          <blockquote>
            <p>åœ¨ addObserver çš„æ—¶å€™ï¼Œä¼šå¯¹ observer è¿›è¡Œè§£æï¼Œå¦‚æœæ˜¯ä¸Šé¢è¿™ç§æ³¨è§£çš„æ–¹å¼ï¼Œåˆ™ä¼šä¸º observer åŒ…è£…ä¸º ReflectiveGenericLifecycleObserverï¼Œé€šè¿‡åå°„çš„æ–¹å¼è°ƒç”¨ã€‚</p>
          </blockquote>
        </li>
        <li>
          <p>å‚è€ƒï¼š<a href="https://github.com/AlanCheen/FullStackNotes/blob/master/android/aac-lifecycle.md">ã€AAC ç³»åˆ—äºŒã€‘æ·±å…¥ç†è§£æ¶æ„ç»„ä»¶çš„åŸºçŸ³ï¼šLifecycle</a></p>
        </li>
      </ol>
    </blockquote>
  </li>
  <li>
    <p>AAC - ViewModel</p>

    <blockquote>
      <ol>
        <li>
          <p>ViewModel æ˜¯å¦‚ä½•åœ¨æ—‹è½¬å±å¹•çš„æ—¶å€™ä¿å­˜æ•°æ®çš„ï¼Ÿ</p>

          <blockquote>
            <p>é€šè¿‡æ³¨å…¥ä¸€ä¸ª <strong>setRetainInstance(true)</strong> çš„ HolderFragmentï¼Œä¿å­˜ ViewModel çš„ ViewModelStore å®ä¾‹åœ¨è¿™ä¸ª HolderFragment ä¸­ï¼Œä»¥æ­¤å®ç°äº† ViewModel çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
          </blockquote>
        </li>
        <li>
          <p>ViewModel çš„å®ä¾‹ï¼š</p>

          <ol>
            <li>é€šè¿‡ ViewModelProvider è·å¾—å®ä¾‹ï¼›</li>
          </ol>
        </li>
        <li>
          <p>å‚è€ƒï¼š<a href="https://github.com/AlanCheen/FullStackNotes/blob/master/android/aac-viewmodel.md">ã€AAC ç³»åˆ—å››ã€‘æ·±å…¥ç†è§£æ¶æ„ç»„ä»¶ï¼šViewModel</a></p>
        </li>
      </ol>
    </blockquote>
  </li>
  <li>
    <p>AAC - LiveData</p>

    <blockquote>
      <ol>
        <li>
          <p>LiveData æ˜¯å¦‚ä½•å’Œ LifeCycle ç»“åˆæ„ŸçŸ¥ç”Ÿå‘½å‘¨æœŸçš„ï¼Ÿ</p>

          <blockquote>
            <p>åœ¨ LiveData çš„ observe æ—¶å€™ï¼Œä¼šä¼ å…¥ LifecycleOwnerï¼Œåœ¨æ¯æ¬¡ onStateChanged çš„æ—¶å€™ï¼Œä¼šåˆ¤æ–­æ˜¯å¦ DESTORYEDï¼Œå¦‚æœå·²ç» DESTORYED å°± remove æ‰ä¸å† activeStateChangedã€‚</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre> <span class="nd">@Override</span>
 <span class="kt">boolean</span> <span class="nf">shouldBeActive</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">mOwner</span><span class="o">.</span><span class="na">getLifecycle</span><span class="o">().</span><span class="na">getCurrentState</span><span class="o">().</span><span class="na">isAtLeast</span><span class="o">(</span><span class="no">STARTED</span><span class="o">);</span>
 <span class="o">}</span>
 
 <span class="nd">@Override</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStateChanged</span><span class="o">(</span><span class="nc">LifecycleOwner</span> <span class="n">source</span><span class="o">,</span> <span class="nc">Lifecycle</span><span class="o">.</span><span class="na">Event</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">mOwner</span><span class="o">.</span><span class="na">getLifecycle</span><span class="o">().</span><span class="na">getCurrentState</span><span class="o">()</span> <span class="o">==</span> <span class="no">DESTROYED</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">removeObserver</span><span class="o">(</span><span class="n">mObserver</span><span class="o">);</span>
      <span class="k">return</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="n">activeStateChanged</span><span class="o">(</span><span class="n">shouldBeActive</span><span class="o">());</span>
 <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div>            </div>
          </blockquote>
        </li>
        <li>
          <p>å‚è€ƒï¼š<a href="https://github.com/AlanCheen/FullStackNotes/blob/master/android/aac-livedata.md">ã€AAC ç³»åˆ—ä¸‰ã€‘æ·±å…¥ç†è§£æ¶æ„ç»„ä»¶ï¼šLiveData</a></p>
        </li>
      </ol>
    </blockquote>
  </li>
  <li>
    <p>è®²è®² Handler åŸç†</p>

    <blockquote>
      <ol>
        <li>
          <p>å½“æ–°çº¿ç¨‹å‘é€ä¸€æ¡ message åˆ° handler  ä¸­æ—¶ï¼Œä¼šæŠŠè¿™æ¡ message ä¿å­˜è¿› messageQueue ä¸­ï¼›</p>
        </li>
        <li>
          <p>åœ¨ handler çº¿ç¨‹ä¸­ï¼Œä¼šæœ‰ä¸€ä¸ªæ°¸åŠ¨æœºä¸€æ ·çš„ Looperï¼Œä¸æ–­ä» messageQueue ä¸­è¯»å–æ–°æ•°æ®ï¼Œå¹¶åœ¨æœ¬çº¿ç¨‹å¤„ç†è¿™ä¸ª messageã€‚</p>
        </li>
        <li>
          <p>Looper æ˜¯ä¿å­˜åœ¨ ThreadLocal ä¸­çš„ï¼Œä¿è¯è¿™ä¸ª Looper æœ¬çº¿ç¨‹ç‹¬äº«ã€‚</p>
        </li>
        <li>
          <p>ä¸ºä»€ä¹ˆ Handler ä¸å¡çº¿ç¨‹ï¼Ÿ</p>

          <blockquote>
            <p>å…¶å®æ˜¯åœ¨è¿›å…¥ Looper.loop() è¿™ä¸ªæ­»å¾ªç¯ä¹‹å‰ï¼Œå°±å¼€å¯äº†æ–°çš„ binder çº¿ç¨‹ï¼Œè¿™ä¸ª binder çº¿ç¨‹ç”¨äºæ¥æ”¶ç³»ç»ŸæœåŠ¡ AMS å‘æ¥çš„äº‹ä»¶ã€‚</p>
          </blockquote>
        </li>
        <li>
          <p>Activity çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å¦‚ä½•åœ¨æ­»å¾ªç¯ä¸­æ‰§è¡Œèµ·æ¥çš„ï¼Ÿ</p>

          <blockquote>
            <p>binder çº¿ç¨‹ä¼šä» AMS æ”¶åˆ°ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œç„¶åå‘é€ç»™ä¸»çº¿ç¨‹ã€‚ä¸»çº¿ç¨‹æ”¶åˆ°æ¶ˆæ¯åæ ¹æ®ä¸åŒçš„msgï¼Œæ‰§è¡Œç›¸åº”çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
          </blockquote>
        </li>
        <li>
          <p>å‚è€ƒï¼š<a href="https://www.zhihu.com/question/34652589/answer/90344494">Androidä¸­ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ä¸ä¼šå› ä¸ºLooper.loop()é‡Œçš„æ­»å¾ªç¯å¡æ­»ï¼Ÿ</a></p>
        </li>
      </ol>
    </blockquote>
  </li>
  <li>
    <p>ä¸ºä»€ä¹ˆç”¨Binder</p>

    <blockquote>
      <ol>
        <li>IPC æœºåˆ¶æœ‰ï¼šç®¡é“ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå…±äº«å†…å­˜ï¼ŒSocketç­‰ã€‚</li>
        <li>é™¤äº†å…±äº«å†…å­˜æ˜¯0æ¬¡æ‹·è´æ•°æ®ï¼Œå…¶ä»–çš„æ€§èƒ½éƒ½ä½äº Binderã€‚</li>
        <li>ç›¸æ¯”äº å…±äº«å†…å­˜ï¼ŒBinder çš„æœ‰ç‚¹ï¼š
          <ol>
            <li>Binder å®‰å…¨æ€§æ›´é«˜ã€‚</li>
            <li>Binder æ˜¯ C/S æ¶æ„ï¼ŒèŒè´£æ˜ç¡®ï¼Œæ¶æ„æ¸…æ™°ï¼Œç¨³å®šæ€§é«˜ã€‚</li>
          </ol>
        </li>
        <li>å‚è€ƒï¼š<a href="http://liuwangshu.cn/framework/binder/1-intro.html">Android BinderåŸç†ï¼ˆä¸€ï¼‰å­¦ä¹ Binderå‰å¿…é¡»è¦äº†è§£çš„çŸ¥è¯†ç‚¹</a></li>
      </ol>
    </blockquote>
  </li>
</ul>

:ET